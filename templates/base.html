<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>{% block title %}Rithin Krishna K V - Portfolio{% endblock %}</title>

  <link rel="stylesheet" href="{{ url_for('static', filename='css/output.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">

  <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/R-icon.png') }}">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" defer></script>

  <style>
    /* ================= CRITICAL FIXES ================= */

    /* Never block mouse events */
    #particle-canvas,
    #cursor-main {
      pointer-events: none !important;
    }

    /* Particle background */
    #particle-canvas {
      position: fixed;
      inset: 0;
      z-index: 0;
    }

    /* Custom cursor (visual only) */
    #cursor-main {
      position: fixed;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: rgba(56, 189, 248, 0.8);
      box-shadow: 0 0 12px rgba(56, 189, 248, 0.8);
      transform: translate(-50%, -50%);
      z-index: 9999;
    }

    body {
      background: radial-gradient(
        circle at top,
        #0f172a,
        #020617
      );
      overflow-x: hidden;
    }

    main, header, footer {
      position: relative;
      z-index: 10;
    }
  </style>
</head>

<body class="text-gray-100 transition-colors duration-300">

  <!-- Visual layers -->
  <canvas id="particle-canvas"></canvas>
  <div id="cursor-main"></div>

  <!-- ================= HEADER ================= -->
  <header class="sticky top-4 z-50 px-6">
    <div class="max-w-6xl mx-auto glass-effect rounded-full px-6 py-3 flex justify-between items-center">

      <a href="{{ url_for('about') }}" class="text-lg font-semibold">
        Rithin Krishna K V
      </a>

      <nav class="hidden md:flex gap-6 text-sm items-center">
        <a href="{{ url_for('about') }}">About</a>
        <a href="{{ url_for('projects') }}">Projects</a>
        <a href="{{ url_for('academics') }}">Academics</a>
        <a href="{{ url_for('research') }}">Research</a>
        <a href="{{ url_for('contact') }}">Contact</a>

        <button id="theme-toggle">
          <i id="theme-toggle-icon" class="fas fa-moon"></i>
        </button>
      </nav>
    </div>
  </header>

  <!-- ================= MAIN ================= -->
  <main class="max-w-7xl mx-auto px-6 pt-24 pb-20">
    {% block content %}{% endblock %}
  </main>

  <!-- ================= FOOTER ================= -->
  <footer class="border-t border-white/10 py-10 text-center text-gray-400">
    Â© 2025 Rithin Krishna K V
  </footer>

  <!-- ================= SCRIPTS ================= -->
  <script>
    /* ===== Custom cursor (SAFE) ===== */
    const cursor = document.getElementById('cursor-main');
    document.addEventListener('mousemove', e => {
      cursor.style.left = e.clientX + 'px';
      cursor.style.top = e.clientY + 'px';
    });

    /* ===== Theme toggle ===== */
    const html = document.documentElement;
    const toggle = document.getElementById('theme-toggle');
    const icon = document.getElementById('theme-toggle-icon');

    function setTheme(t) {
      html.classList.toggle('dark', t === 'dark');
      icon.className = t === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
      localStorage.setItem('theme', t);
    }

    setTheme(localStorage.getItem('theme') || 'dark');

    toggle.onclick = () =>
      setTheme(html.classList.contains('dark') ? 'light' : 'dark');
  </script>

</body>
</html>
